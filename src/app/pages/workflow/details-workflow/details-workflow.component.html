<div class="section-heading">
  <div class="d-flex justify-content-between align-items-center">
    <div>
      <div class="d-flex">
        <img src="assets/img/icons/arrow-left-icon.svg" alt="back" class="me-3" (click)="back()">
        <h4>
          Workflow
        </h4>
      </div>
    </div>

  </div>
</div>

<div class="accordion px-2 " id="accordionExample">
  <div class="accordion-item mt-3">
    <h2 class="accordion-header" id="heading1">
      <h6 class="header" data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse1'" aria-expanded="true" [attr.aria-controls]="'collapse1'">
        Details
      </h6>
    </h2>
    <div id="collapse1" class="accordion-collapse collapse " [attr.aria-labelledby]="'heading1'" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <div class="content mt-3">
          <div class="p-2" *ngIf="form.components.length > 0">
            <formio-editor [form]="form" [options]="options"></formio-editor>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="accordion-item mt-3">
    <h2 class="accordion-header" id="heading2">
      <h6 class="header" data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse2'" aria-expanded="true" [attr.aria-controls]="'collapse2'">
        Workflow
      </h6>
    </h2>
    <div id="collapse2" class="accordion-collapse collapse show" [attr.aria-labelledby]="'heading2'" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <div class=" mt-3">
          <div class="mb-3" *ngFor="let item of workflowProcess">
            <div class="bg-white px-2">
              <div class="white-box py-2">
                <div class="box-content">
                  <p class="number">
                    {{item.workflowStagesName}}
                  </p>
                  <h5 class="font-14">
                    {{item.userName}}
                  </h5>
                  <p class="date">{{item.dueDate | date:'short'}}</p>
                </div>
                <div class="box-side">
                  <div class="d-flex align-items-center">
                    <p class="badge me-2">
                      <img src="assets/img/icons/workflow.svg" alt="workflow">
                    </p>
                  </div>
                </div>
              </div>
              <p class="comment">
                {{item.comment}}
              </p>
              <div class="d-flex justify-content-between align-items-stretch actions" *ngIf="showActionButton(item)">
                <button class="accept" data-bs-toggle="modal" data-bs-target="#newModal" (click)="saveAction(true,item)">
                  <img src="assets/img/icons/accept.png" alt="accept">
                  Accept
                </button>
                <button class="reject" data-bs-toggle="modal" data-bs-target="#newModal" (click)="saveAction(false,item)">
                  <img src="assets/img/icons/reject.png" alt="accept">
                  Reject
                </button>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="newModal" tabindex="-1" aria-labelledby="deleteLabel" aria-hidden="true">
  <div class="modal-dialog  modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header text-center p-2 ">
        <h5 class="modal-title" id="deleteLabel">Start new </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeModal></button>
      </div>
      <div class="modal-body">
        <div class="form-floating ">
          <textarea type="text" style="height: 100px;" class="form-control" id="floatingInput" placeholder="Name" [(ngModel)]="comment" name="comment"></textarea>
          <label for="floatingInput"> Comment</label>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <button type="button" class="btn btn-primary w-100 mt-4" data-bs-dismiss="modal" (click)="submit()" [disabled]="!comment">Submit</button>
        </div>
      </div>
    </div>
  </div>
</div>
